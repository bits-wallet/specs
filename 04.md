BDS-04
======

Silent Swaps
-------------------------------

`draft` `mandatory` `author:brqgoo`

This BDS defines a privacy-preserving, footprint-minimal, offline swap-in mechanism to be used for BitsApp receiving.

## Rationale

[BDS-01](https://github.com/bits-wallet/specs/blob/main/01.md) mandates BitsApp channels to operate one-way-only for the interactivity benefits. This means inbound payments are not allowed for BitsApp channels. Sending on BitsApp is off-chain only, and receiving is on-chain-only. The only way to receive on-chain liquidity through lightning is submarine swaps. However, submarine swaps have many drawbacks:

### Receiver privacy
Offline receiving is not possible without compromising privacy.

### On-chain footprint
Submarine swaps don't scale. From sweeping funds to opening a channel, overall process consumes 182 vBytes in a HTLC-based approach and 142 vBytes in a PTLC-based approach:

| Type                         | Output    | Outpoint  | Redemption  | Channel output | Total       |
|------------------------------|----------------|----------------|--------------|----------------|-----------  |
| HTLC-based submarine swaps   | 43 vBytes      | 40 vBytes      | 56 vBytes    | 43 vBytes      | 182 vBytes  |
| PTLC-based submarine swaps   | 43 vBytes      | 40 vBytes       | 16 vBytes   | 43 vBytes      | 142 vBytes  |

## Specification
This BDS proposes a placement for submarine swaps; silent swaps. Silent swaps are effectively a specialized form of submarine swaps, however, built in mind with scaling and privacy. Silent swaps utilize a channel factory approach to save massively on fees and space and use ECDH to enable offline receiving while preserving recipient privacy.

Silent swaps are based on three main pillars:
1. Swap Factories
2. Offline Receiving
3. Swap Credit Protocol
